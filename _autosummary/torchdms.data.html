<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>torchdms.data &mdash; torchdms 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="torchdms.data.check_onehot_encoding" href="torchdms.data.check_onehot_encoding.html" />
    <link rel="prev" title="torchdms.cli.set_random_seed" href="torchdms.cli.set_random_seed.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> torchdms
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model.html">Specifying models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="torchdms.html">torchdms</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="torchdms.analysis.html">torchdms.analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="torchdms.cli.html">torchdms.cli</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">torchdms.data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.check_onehot_encoding.html">torchdms.data.check_onehot_encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.expand_substitutions_into_df.html">torchdms.data.expand_substitutions_into_df</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.explode_binarymap_dataframe.html">torchdms.data.explode_binarymap_dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.partition.html">torchdms.data.partition</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.prep_by_stratum_and_export.html">torchdms.data.prep_by_stratum_and_export</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.summarize_binarymap_dataframe.html">torchdms.data.summarize_binarymap_dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.BinaryMapDataset.html">torchdms.data.BinaryMapDataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.SplitDataframe.html">torchdms.data.SplitDataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="torchdms.data.SplitDataset.html">torchdms.data.SplitDataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="torchdms.evaluation.html">torchdms.evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="torchdms.loss.html">torchdms.loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="torchdms.model.html">torchdms.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="torchdms.plot.html">torchdms.plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="torchdms.utils.html">torchdms.utils</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">torchdms</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="torchdms.html">torchdms</a> &raquo;</li>
      <li>torchdms.data</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-torchdms.data">
<span id="torchdms-data"></span><h1>torchdms.data<a class="headerlink" href="#module-torchdms.data" title="Permalink to this headline">¶</a></h1>
<p>Tools for handling data.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="torchdms.data.check_onehot_encoding.html#torchdms.data.check_onehot_encoding" title="torchdms.data.check_onehot_encoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_onehot_encoding</span></code></a></p></td>
<td><p>Asserts that the tensor onehot encoding we have in the Datasets is the same as one that we make ourselves from the strings.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="torchdms.data.expand_substitutions_into_df.html#torchdms.data.expand_substitutions_into_df" title="torchdms.data.expand_substitutions_into_df"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expand_substitutions_into_df</span></code></a></p></td>
<td><p>Expand a Series of substitutions into a dataframe showing the wt_AA, the site, and the mut_AA.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="torchdms.data.explode_binarymap_dataframe.html#torchdms.data.explode_binarymap_dataframe" title="torchdms.data.explode_binarymap_dataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">explode_binarymap_dataframe</span></code></a></p></td>
<td><p>Make a dataframe that has one row for each mutation of every mutated variant, showing the wt_AA, the site, and the mut_AA.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="torchdms.data.partition.html#torchdms.data.partition" title="torchdms.data.partition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">partition</span></code></a></p></td>
<td><p>Partition the data as needed and build a SplitDataframe.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="torchdms.data.prep_by_stratum_and_export.html#torchdms.data.prep_by_stratum_and_export" title="torchdms.data.prep_by_stratum_and_export"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prep_by_stratum_and_export</span></code></a></p></td>
<td><p>Print number of training examples per stratum and test samples, run prepare(), and export to .pkl file with descriptive filename.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="torchdms.data.summarize_binarymap_dataframe.html#torchdms.data.summarize_binarymap_dataframe" title="torchdms.data.summarize_binarymap_dataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_binarymap_dataframe</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="torchdms.data.BinaryMapDataset.html#torchdms.data.BinaryMapDataset" title="torchdms.data.BinaryMapDataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryMapDataset</span></code></a></p></td>
<td><p>Binarymap dataset.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="torchdms.data.SplitDataframe.html#torchdms.data.SplitDataframe" title="torchdms.data.SplitDataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SplitDataframe</span></code></a></p></td>
<td><p>Dataframes for each of test, validation, and train.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="torchdms.data.SplitDataset.html#torchdms.data.SplitDataset" title="torchdms.data.SplitDataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SplitDataset</span></code></a></p></td>
<td><p>BinaryMapDatasets for each of test, validation, and train.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="torchdms.data.BinaryMapDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">BinaryMapDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtseq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphabet</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#BinaryMapDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.BinaryMapDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Binarymap dataset.</p>
<p>This class organizes the information from the input dataset
into a wrapper containing all relevent attributes for training
and evaluation.</p>
<p>We also store the original dataframe as it may contain
important metadata (such as target variance), but
drop redundant columns that are already attributes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="torchdms.data.BinaryMapDataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtseq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphabet</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#BinaryMapDataset.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.BinaryMapDataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="torchdms.data.BinaryMapDataset.target_extrema">
<span class="sig-name descname"><span class="pre">target_extrema</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#BinaryMapDataset.target_extrema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.BinaryMapDataset.target_extrema" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a (min, max) tuple for the value of each target.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torchdms.data.SplitDataframe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">SplitDataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#SplitDataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.SplitDataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframes for each of test, validation, and train.</p>
<p>Train is partitioned into a list of dataframes according to the
number of mutations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="torchdms.data.SplitDataframe.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#SplitDataframe.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.SplitDataframe.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torchdms.data.SplitDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">SplitDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#SplitDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.SplitDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>BinaryMapDatasets for each of test, validation, and train.</p>
<p>Train is partitioned into a list of BinaryMapDatasets according to
the number of mutations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="torchdms.data.SplitDataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#SplitDataset.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.SplitDataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="torchdms.data.SplitDataset.labeled_splits">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">labeled_splits</span></span><a class="headerlink" href="#torchdms.data.SplitDataset.labeled_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator on (label, split) pairs.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="torchdms.data.expand_substitutions_into_df">
<span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">expand_substitutions_into_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substitution_series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#expand_substitutions_into_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.expand_substitutions_into_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand a Series of substitutions into a dataframe showing the wt_AA, the
site, and the mut_AA.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="torchdms.data.explode_binarymap_dataframe">
<span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">explode_binarymap_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#explode_binarymap_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.explode_binarymap_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a dataframe that has one row for each mutation of every mutated
variant, showing the wt_AA, the site, and the mut_AA.</p>
<p>Other information is duplicated as needed.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="torchdms.data.check_onehot_encoding">
<span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">check_onehot_encoding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#check_onehot_encoding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.check_onehot_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that the tensor onehot encoding we have in the Datasets is the
same as one that we make ourselves from the strings.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="torchdms.data.partition">
<span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aa_func_scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_stratum_variants_for_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_stratum_if_count_is_smaller_than</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_on_all_single_mutants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#partition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Partition the data as needed and build a SplitDataframe.</p>
<p>A “stratum” is a slice of the data with a given number of mutations. We group
training data sets into strata based on their number of mutations so that the data
is presented the neural network with an even proportion of each.</p>
<p>Furthermore, we group data rows by unique variants and then split on those grouped
items so that we don’t have the same variant showing up in train and test.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="torchdms.data.prep_by_stratum_and_export">
<span class="sig-prename descclassname"><span class="pre">torchdms.data.</span></span><span class="sig-name descname"><span class="pre">prep_by_stratum_and_export</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtseq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_label</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torchdms/data.html#prep_by_stratum_and_export"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#torchdms.data.prep_by_stratum_and_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Print number of training examples per stratum and test samples, run
prepare(), and export to .pkl file with descriptive filename.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="torchdms.cli.set_random_seed.html" class="btn btn-neutral float-left" title="torchdms.cli.set_random_seed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="torchdms.data.check_onehot_encoding.html" class="btn btn-neutral float-right" title="torchdms.data.check_onehot_encoding" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>